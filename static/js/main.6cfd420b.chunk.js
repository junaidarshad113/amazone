(this["webpackJsonpamazon-clone-app"]=this["webpackJsonpamazon-clone-app"]||[]).push([[0],{101:function(e,t){},103:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(26),l=a.n(r),i=(a(58),a(4)),s=(a(59),a(60),a(48)),m=a.n(s),o=a(49),u=a.n(o),p=a(12),d=Object(n.createContext)(),E=function(e){var t=e.reducer,a=e.initialState,r=e.children;return c.a.createElement(d.Provider,{value:Object(n.useReducer)(t,a)},r)},g=function(){return Object(n.useContext)(d)},h=a(22),_=a.n(h),v=(_.a.initializeApp({apiKey:"AIzaSyCcPSKlYtpdzBoAC8soeSmIARMzVKzrf5I",authDomain:"challenge-4b2b2.firebaseapp.com",databaseURL:"https://challenge-4b2b2.firebaseio.com",projectId:"challenge-4b2b2",storageBucket:"challenge-4b2b2.appspot.com",messagingSenderId:"962418448875",appId:"1:962418448875:web:f6cce5eeaf819481f661ae"}).firestore(),_.a.auth());var b=function(){var e=g(),t=Object(i.a)(e,1)[0],a=t.basket,n=t.user;return c.a.createElement("div",{className:"header"},c.a.createElement(p.b,{to:"/"},c.a.createElement("img",{className:"header_logo",src:"http://pngimg.com/uploads/amazon/amazon_PNG11.png",alt:"brand_img"})),c.a.createElement("div",{className:"header_search"},c.a.createElement("input",{className:"header_searchInput",type:"text"}),c.a.createElement(m.a,{className:"header_searchIcon"})),c.a.createElement("div",{className:"header_nav"},c.a.createElement(p.b,{to:!n&&"/Login"},c.a.createElement("div",{className:"header_option",onClick:function(){n&&v.signOut()}},c.a.createElement("span",{className:"header-optionLine1"},"Hello  ",n?null===n||void 0===n?void 0:n.email:"Guest"),c.a.createElement("span",{className:"header-optionLine2"},n?"signout":"Sign in"))),c.a.createElement("div",{className:"header_option"},c.a.createElement("span",{className:"header-optionLine1"},"Returns"),c.a.createElement("span",{className:"header-optionLine2"},"& Orders")),c.a.createElement("div",{className:"header_option"},c.a.createElement("span",{className:"header-optionLine1"},"Your"),c.a.createElement("span",{className:"header-optionLine2"},"Prime")),c.a.createElement(p.b,{to:"/checkout"},c.a.createElement("div",{className:"header_optionBasket"},c.a.createElement(u.a,{className:"ShoppingBasket"}),c.a.createElement("span",{className:"header-optionLine2 header_optionBasketCount"},null===a||void 0===a?void 0:a.length)))))},f=(a(76),a(77),a(34)),S=a(20),N=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){return t.price+e}),0)},O=function(e,t){switch(console.log(t),t.type){case"ADD_TO_BASKET":return Object(S.a)(Object(S.a)({},e),{},{basket:[].concat(Object(f.a)(e.basket),[t.item])});case"REMOVE_FROM_BASKET":var a=e.basket.findIndex((function(e){return e.id===t.id})),n=Object(f.a)(e.basket);return 0===a?n.splice(a,1):console.warn("cant remove the product (id: ".concat(t.id,") as it is not in the basket")),Object(S.a)(Object(S.a)({},e),{},{basket:n});case"SET_USER":return Object(S.a)(Object(S.a)({},e),{},{user:t.user});case"EMPTY_THE_BASKET":return{};default:return e}};var A=function(e){var t=e.id,a=e.title,n=e.image,r=e.price,l=e.rating,s=g(),m=Object(i.a)(s,2),o=(m[0].basket,m[1]);return c.a.createElement("div",{className:"product"},c.a.createElement("div",{className:"product_info"},c.a.createElement("p",null,a),c.a.createElement("p",{className:"product_price"},c.a.createElement("small",null,"PKR"),c.a.createElement("strong",null,r)),c.a.createElement("div",{className:"product_rating"},Array(l).fill().map((function(e,t){return c.a.createElement("p",null,"\u2b50")})))),c.a.createElement("img",{src:n}),c.a.createElement("button",{onClick:function(){o({type:"ADD_TO_BASKET",item:{id:t,title:a,price:r,rating:l,image:n}})}},"Add to Basket"))};var k=function(){return c.a.createElement("div",null,c.a.createElement("div",{className:"home"},c.a.createElement("div",{className:"home_container"},c.a.createElement("img",{className:"home_image",src:"https://images-eu.ssl-images-amazon.com/images/G/02/digital/video/merch2016/Hero/Covid19/Generic/GWBleedingHero_ENG_COVIDUPDATE__XSite_1500x600_PV_en-GB._CB428684220_.jpg",alt:"banner_image"}),c.a.createElement("div",{className:"home_row"},c.a.createElement(A,{title:"The lean startup",id:1,price:4.99,image:"https://images-na.ssl-images-amazon.com/images/I/51Zymoq7UnL._AC_SY400_.jpg",rating:5}),c.a.createElement(A,{title:"New Apple MacBook Pro (16-inch, 16GB RAM, 512GB Storage, 2.6GHz Intel Core i7) - Space Gray",id:2,price:2099,rating:4,image:"https://images-na.ssl-images-amazon.com/images/I/71pC69I3lzL._AC_SL1500_.jpg"})),c.a.createElement("div",{className:"home_row"},c.a.createElement(A,{title:"Asus VP28UQG 28 Monitor 4K/UHD 3840x2160 1ms DP HDMI Adaptive Sync/FreeSync Eye Care Monitor",id:3,price:2.099,rating:3,image:"https://images-na.ssl-images-amazon.com/images/I/91ttSUjDUzL._AC_SL1500_.jpg"}),c.a.createElement(A,{title:"Apple MacBook Air (13-inch, 8GB RAM, 256GB SSD Storage) - Space Gray (Latest Model)",id:4,price:949.99,rating:3,image:"https://images-na.ssl-images-amazon.com/images/I/71k3fJh5EwL._AC_SL1500_.jpg"}),c.a.createElement(A,{title:"Samsung SSD 860 EVO 1TB 2.5 Inch SATA III Internal SSD (MZ-76E1T0B/AM)",id:4,price:129.99,image:"https://images-na.ssl-images-amazon.com/images/I/91JA5-hAnoL._AC_SL1500_.jpg",rating:4})),c.a.createElement("div",{className:"home_row"},c.a.createElement(A,{title:"Hisense 43-Inch Class H4 Series LED Roku Smart TV with Alexa Compatibility (43H4F, 2020 Model)",id:5,price:189.99,image:"https://images-na.ssl-images-amazon.com/images/I/71wq7qNoBLL._AC_SL1500_.jpg",rating:4})))))},C=a(5),y=(a(78),a(79),a(29)),j=a.n(y);var T=function(){var e=g(),t=Object(i.a)(e,1)[0].basket,a=Object(C.f)();return c.a.createElement("div",{className:"subTotal"},c.a.createElement(j.a,{renderText:function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,"Subtotal(",null===t||void 0===t?void 0:t.length," items) :",c.a.createElement("strong",null,e)),c.a.createElement("small",{className:"subTotal_gift"},c.a.createElement("input",{type:"checkbox"}),"This order contains a gift"))},decimalScale:2,value:N(t),displayType:"text",thousandsSeparator:!0,prefix:"$"}),c.a.createElement("button",{onClick:function(e){return a.push("/payment")}},"Proceed to checkout"))};a(81);var P=function(e){var t=e.id,a=e.image,n=e.title,r=e.price,l=e.rating,s=g(),m=Object(i.a)(s,2),o=(m[0].basket,m[1]);return c.a.createElement("div",{className:"CheckoutProduct"},c.a.createElement("img",{src:a,alt:"",className:"checkoutProduct_image"}),c.a.createElement("div",{className:"checkoutProducts_info"},c.a.createElement("p",{className:"checkoutProducts_title"},n),c.a.createElement("p",{className:"checkoutProducts_price"},c.a.createElement("small",null,"$"),c.a.createElement("strong",null,r)),c.a.createElement("p",{className:"checkoutProducts_rating"},Array(l).fill().map((function(e,t){return c.a.createElement("p",null,"\u2b50")}))),c.a.createElement("button",{onClick:function(){o({type:"REMOVE_FROM_BASKET",id:t})}},"Remove the basket")))};var I=function(){var e=g(),t=Object(i.a)(e,1)[0],a=t.basket;return t.user,c.a.createElement("div",{className:"checkout"},c.a.createElement("div",{className:"checkout_left"},c.a.createElement("img",{src:"https://images-na.ssl-images-amazon.com/images/G/02/UK_CCMP/TM/OCC_Amazon1._CB423492668_.JPG",alt:"Ad_image",className:"checkoutad"}),c.a.createElement("div",null,c.a.createElement("h2",{className:"checkout_title"},"Your shopping basket"),a.map((function(e){return c.a.createElement(P,{id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating})})))),c.a.createElement("div",{className:"checkout_right"},c.a.createElement(T,null)))};a(82);var B=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(""),s=Object(i.a)(l,2),m=s[0],o=s[1],u=Object(C.f)();return c.a.createElement("div",{className:"login"},c.a.createElement(p.b,{to:"/"},c.a.createElement("img",{src:"https://vignette.wikia.nocookie.net/logopedia/images/f/fd/Amazon.svg/revision/latest/scale-to-width-down/300?cb=20200604050112",alt:"brand-logo",className:"logo"})),c.a.createElement("div",{className:"login_container"},c.a.createElement("h1",null,"Sign In"),c.a.createElement("form",null,c.a.createElement("h5",null,"Email"),c.a.createElement("input",{type:"email",value:a,onChange:function(e){return r(e.target.value)}}),c.a.createElement("h5",null,"Password"),c.a.createElement("input",{type:"password",value:m,onChange:function(e){return o(e.target.value)}}),c.a.createElement("button",{type:"submit",className:"Login-SigninButton",onClick:function(e){e.preventDefault(),v.signInWithEmailAndPassword(a,m).then((function(e){u.push("/")})).catch((function(e){alert(e.message)}))}},"Sign In")),c.a.createElement("p",null,"By continuing, you agree to Amazon Clone's Conditions of Use and Privacy Notice."),c.a.createElement("button",{className:"Login-RegisterButton",onClick:function(e){e.preventDefault(),v.createUserWithEmailAndPassword(a,m).then((function(e){console.log(e),e&&u.push("/")})).catch((function(e){alert(e.message)}))}},"Create Your Amazon Account")))},L=a(23),D=a.n(L),R=a(33),z=(a(84),a(19)),w=a(50),M=a.n(w);var H=function(){var e=g(),t=Object(i.a)(e,2),a=t[0],r=a.basket,l=a.user,s=t[1],m=Object(C.f)(),o=Object(z.useStripe)(),u=Object(z.useElements)(),d=Object(n.useState)(!1),E=Object(i.a)(d,2),h=E[0],_=E[1],v=Object(n.useState)(""),b=Object(i.a)(v,2),f=b[0],S=b[1],O=Object(n.useState)(null),A=Object(i.a)(O,2),k=A[0],y=A[1],T=Object(n.useState)(!0),I=Object(i.a)(T,2),B=I[0],L=I[1],w=Object(n.useState)(!0),H=Object(i.a)(w,2),U=H[0],G=H[1];Object(n.useEffect)((function(){(function(){var e=Object(R.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M()({method:"post",url:"/payments/create?total=".concat(100*N(r))});case 2:t=e.sent,G(t.data.clientSecret);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[r]),console.log("THE SECRET IS >>>",U);var K=function(){var e=Object(R.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),S(!0),e.next=4,o.confirmCardPayment(U,{payment_method:{card:u.getElement(z.CardElement)}}).then((function(e){e.paymentIntent;_(!0),y(null),S(!1),s({type:"EMPTY_BASKET"}),m.replace("/orders")}));case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"payment"},c.a.createElement("div",{className:"payment__container"},c.a.createElement("h1",null,"Checkout (",c.a.createElement(p.b,{to:"/checkout"},null===r||void 0===r?void 0:r.length," items"),")"),c.a.createElement("div",{className:"payment__section"},c.a.createElement("div",{className:"payment__title"},c.a.createElement("h3",null,"Delivery Address")),c.a.createElement("div",{className:"payment__address"},c.a.createElement("p",null,null===l||void 0===l?void 0:l.email),c.a.createElement("p",null,"123 React Lane"),c.a.createElement("p",null,"Los Angeles, CA"))),c.a.createElement("div",{className:"payment__section"},c.a.createElement("div",{className:"payment__title"},c.a.createElement("h3",null,"Review items and delivery")),c.a.createElement("div",{className:"payment__items"},r.map((function(e){return c.a.createElement(P,{id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating})})))),c.a.createElement("div",{className:"payment__section"},c.a.createElement("div",{className:"payment__title"},c.a.createElement("h3",null,"Payment Method")),c.a.createElement("div",{className:"payment__details"},c.a.createElement("form",{onSubmit:K},c.a.createElement(z.CardElement,{onChange:function(e){L(e.empty),y(e.error?e.error.message:"")}}),c.a.createElement("div",{className:"payment__priceContainer"},c.a.createElement(j.a,{renderText:function(e){return c.a.createElement("h3",null,"Order Total: ",e)},decimalScale:2,value:N(r),displayType:"text",thousandSeparator:!0,prefix:"PKR"}),c.a.createElement("button",{disabled:f||B||h},c.a.createElement("span",null,f?c.a.createElement("p",null,"Processing"):"Buy Now"))),k&&c.a.createElement("div",null,k))))))},U=a(51),G=Object(U.a)("pk_test_51HQHGIA7cYE6dAMbnDGCJ00bVuXQgRSzzXBlZRSDBQSJZ1zWwFv1kqK1fd2Yao3l1poFOP5UjcItVUFn3QRGRHkg008yHqYta5");var K=function(){var e=g(),t=Object(i.a)(e,2),a=(t[0].basket,t[1]);return Object(n.useEffect)((function(){Object(h.auth)().onAuthStateChanged((function(e){console.log("The user is >>>",e),a(e?{type:"SET_USER",user:e}:{type:"SET_USER",user:null})}))}),[]),c.a.createElement(p.a,null,c.a.createElement("div",{className:"app"},c.a.createElement(b,null),c.a.createElement(C.c,null,c.a.createElement(C.a,{path:"/checkout"},c.a.createElement(I,null)),c.a.createElement(C.a,{path:"/Login"},c.a.createElement(B,null)),c.a.createElement(C.a,{path:"/payment"},c.a.createElement(z.Elements,{stripe:G},c.a.createElement(H,null))),c.a.createElement(C.a,{path:"/"},c.a.createElement(k,null)))))};a(101),Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_AUTH0_DOMAIN,Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_AUTH0_CLIENT_ID;l.a.render(c.a.createElement(E,{initialState:{basket:[]},reducer:O},c.a.createElement(K,null)),document.getElementById("root"))},53:function(e,t,a){e.exports=a(103)},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},84:function(e,t,a){}},[[53,1,2]]]);
//# sourceMappingURL=main.6cfd420b.chunk.js.map